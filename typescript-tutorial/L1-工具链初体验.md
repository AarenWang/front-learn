# L1 - å·¥å…·é“¾åˆä½“éªŒ

## ğŸ“š å­¦ä¹ ç›®æ ‡

- æŒæ¡ TypeScript ç¼–è¯‘å™¨ (`tsc`) çš„åŸºæœ¬ä½¿ç”¨
- ç†è§£ `tsconfig.json` é…ç½®æ–‡ä»¶çš„æ ¸å¿ƒé€‰é¡¹
- äº†è§£ä¸åŒçš„ç¼–è¯‘ç›®æ ‡åŠå…¶é€‚ç”¨åœºæ™¯
- èƒ½å¤Ÿç‹¬ç«‹åˆå§‹åŒ–å’Œè¿è¡Œ TypeScript é¡¹ç›®

## ğŸ› ï¸ TypeScript ç¼–è¯‘å™¨ (tsc)

### å®‰è£… TypeScript

```bash
# å…¨å±€å®‰è£…
npm install -g typescript

# é¡¹ç›®æœ¬åœ°å®‰è£…
npm install --save-dev typescript

# éªŒè¯å®‰è£…
tsc --version
```

### åŸºæœ¬ç¼–è¯‘å‘½ä»¤

```bash
# ç¼–è¯‘å•ä¸ªæ–‡ä»¶
tsc hello.ts

# ç¼–è¯‘å¹¶ç›‘è§†æ–‡ä»¶å˜åŒ–
tsc hello.ts --watch

# æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯
tsc hello.ts --verbose

# ç¼–è¯‘æ•´ä¸ªé¡¹ç›®
tsc

# åªæ£€æŸ¥ç±»å‹ï¼Œä¸ç”Ÿæˆæ–‡ä»¶
tsc --noEmit
```

## ğŸ“ tsconfig.json é…ç½®

### åˆå§‹åŒ–é…ç½®æ–‡ä»¶

```bash
# åˆ›å»ºé»˜è®¤ tsconfig.json
tsc --init

# åˆ›å»ºå¸¦è¯¦ç»†æ³¨é‡Šçš„é…ç½®
npx tsc --init --showConfig
```

### æ ¸å¿ƒé…ç½®é€‰é¡¹

```json
{
  "compilerOptions": {
    /* åŸºç¡€é€‰é¡¹ */
    "target": "ES2020",                    // ç¼–è¯‘ç›®æ ‡ç‰ˆæœ¬
    "module": "ESNext",                    // æ¨¡å—ç³»ç»Ÿ
    "lib": ["ES2020", "DOM"],             // åŒ…å«çš„åº“æ–‡ä»¶
    "outDir": "./dist",                   // è¾“å‡ºç›®å½•
    
    /* ä¸¥æ ¼æ£€æŸ¥ */
    "strict": true,                       // å¯ç”¨æ‰€æœ‰ä¸¥æ ¼æ£€æŸ¥
    "noImplicitAny": true,               // ç¦æ­¢éšå¼ any
    "strictNullChecks": true,            // ä¸¥æ ¼ç©ºå€¼æ£€æŸ¥
    "strictFunctionTypes": true,         // ä¸¥æ ¼å‡½æ•°ç±»å‹
    
    /* æ¨¡å—è§£æ */
    "moduleResolution": "node",           // æ¨¡å—è§£æç­–ç•¥
    "baseUrl": "./",                      // åŸºç¡€è·¯å¾„
    "paths": {                            // è·¯å¾„æ˜ å°„
      "@/*": ["src/*"]
    },
    
    /* ä»£ç ç”Ÿæˆ */
    "declaration": true,                  // ç”Ÿæˆ .d.ts æ–‡ä»¶
    "sourceMap": true,                    // ç”Ÿæˆ source map
    "removeComments": true,               // ç§»é™¤æ³¨é‡Š
    
    /* å…¶ä»–é€‰é¡¹ */
    "skipLibCheck": true,                 // è·³è¿‡åº“æ–‡ä»¶æ£€æŸ¥
    "forceConsistentCasingInFileNames": true, // å¼ºåˆ¶æ–‡ä»¶åå¤§å°å†™ä¸€è‡´
    "esModuleInterop": true              // å¯ç”¨ ES æ¨¡å—äº’æ“ä½œ
  },
  
  "include": [
    "src/**/*"                           // åŒ…å«çš„æ–‡ä»¶
  ],
  
  "exclude": [
    "node_modules",                      // æ’é™¤çš„æ–‡ä»¶
    "dist",
    "**/*.test.ts"
  ]
}
```

## ğŸ¯ ç¼–è¯‘ç›®æ ‡è¯¦è§£

### Target é€‰é¡¹å¯¹æ¯”

| Target | ç‰¹æ€§ | é€‚ç”¨åœºæ™¯ | æµè§ˆå™¨æ”¯æŒ |
|--------|------|----------|------------|
| ES3 | æœ€åŸºç¡€å…¼å®¹ | è€æ—§ç³»ç»Ÿ | IE6+ |
| ES5 | å¹¿æ³›å…¼å®¹ | ä¼ ç»Ÿé¡¹ç›® | IE9+ |
| ES2015 (ES6) | ç°ä»£ç‰¹æ€§ | å†…éƒ¨å·¥å…· | ç°ä»£æµè§ˆå™¨ |
| ES2017 | async/await | Node.js ç¯å¢ƒ | ç°ä»£æµè§ˆå™¨ |
| ES2020 | å¯é€‰é“¾ã€ç©ºå€¼åˆå¹¶ | æœ€æ–°é¡¹ç›® | æœ€æ–°æµè§ˆå™¨ |
| ESNext | æœ€æ–°ç‰¹æ€§ | å‰æ²¿é¡¹ç›® | å®éªŒæ€§æ”¯æŒ |

### Module é€‰é¡¹

```typescript
// ä¸åŒæ¨¡å—ç³»ç»Ÿçš„è¾“å‡ºç¤ºä¾‹

// ES Module (ESNext)
export const greet = (name: string): string => {
  return `Hello, ${name}!`;
};

// ç¼–è¯‘å
export const greet = (name) => {
  return `Hello, ${name}!`;
};

// CommonJS
const greet = (name: string): string => {
  return `Hello, ${name}!`;
};
module.exports = { greet };

// ç¼–è¯‘å
const greet = (name) => {
  return `Hello, ${name}!`;
};
module.exports = { greet };
```

## ğŸ”§ å®è·µï¼šHello TypeScript

### ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºé¡¹ç›®ç»“æ„

```bash
mkdir hello-typescript
cd hello-typescript
npm init -y
npm install --save-dev typescript

# åˆ›å»ºé¡¹ç›®ç»“æ„
mkdir src
mkdir dist
```

### ç¬¬äºŒæ­¥ï¼šé…ç½® tsconfig.json

```json
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "ESNext", 
    "outDir": "./dist",
    "rootDir": "./src",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true
  },
  "include": ["src/**/*"],
  "exclude": ["node_modules", "dist"]
}
```

### ç¬¬ä¸‰æ­¥ï¼šç¼–å†™ TypeScript ä»£ç 

```typescript
// src/hello.ts
interface User {
  name: string;
  age: number;
}

class Greeter {
  private user: User;

  constructor(user: User) {
    this.user = user;
  }

  greet(): string {
    return `Hello, ${this.user.name}! You are ${this.user.age} years old.`;
  }

  celebrateBirthday(): void {
    this.user.age += 1;
    console.log(`Happy ${this.user.age}th birthday, ${this.user.name}!`);
  }
}

const user: User = {
  name: "Alice",
  age: 25
};

const greeter = new Greeter(user);
console.log(greeter.greet());
greeter.celebrateBirthday();
console.log(greeter.greet());
```

### ç¬¬å››æ­¥ï¼šç¼–è¯‘å’Œè¿è¡Œ

```bash
# ç¼–è¯‘
npx tsc

# è¿è¡Œç¼–è¯‘åçš„ä»£ç 
node dist/hello.js

# æˆ–è€…ä½¿ç”¨ ts-node ç›´æ¥è¿è¡Œ
npx ts-node src/hello.ts
```

## ğŸ“Š ç¼–è¯‘æ—¥å¿—åˆ†æ

### è¯¦ç»†ç¼–è¯‘è¾“å‡º

```bash
$ npx tsc --verbose

# è¾“å‡ºç¤ºä¾‹:
# TS6033: 'hello.ts' is a TypeScript file, not a JavaScript file.
# Did you mean to run `npx tsc hello.ts` instead?

$ npx tsc

# æˆåŠŸç¼–è¯‘ï¼Œæ— è¾“å‡ºï¼ˆé™é»˜æ¨¡å¼ï¼‰
```

### é”™è¯¯ä¿¡æ¯è§£è¯»

```typescript
// ç¤ºä¾‹é”™è¯¯ä»£ç 
const x: number = "hello";

// ç¼–è¯‘é”™è¯¯:
// src/error.ts:1:7 - error TS2322: Type 'string' is not assignable to type 'number'.
// 
// 1 const x: number = "hello";
//         ~
//   Found 1 error.
```

### è­¦å‘Šä¿¡æ¯å¤„ç†

```typescript
// å¯èƒ½äº§ç”Ÿè­¦å‘Šçš„ä»£ç 
let unusedVariable: string = "this is never used";

// ç¼–è¯‘é€‰é¡¹å¯ç”¨è­¦å‘Š
// "noUnusedLocals": true,
// "noUnusedParameters": true,

// è¾“å‡º:
// src/warning.ts:1:5 - warning TS6133: 'unusedVariable' is declared but its value is never read.
```

## ğŸš€ é«˜çº§ç¼–è¯‘é€‰é¡¹

### å¢é‡ç¼–è¯‘

```json
{
  "compilerOptions": {
    "incremental": true,
    "tsBuildInfoFile": "./.tsbuildinfo"
  }
}
```

### é¡¹ç›®å¼•ç”¨

```json
// ä¸»é¡¹ç›®çš„ tsconfig.json
{
  "compilerOptions": {
    "composite": true,
    "declaration": true
  },
  "references": [
    { "path": "./utils" },
    { "path": "./types" }
  ]
}

// utils/tsconfig.json
{
  "compilerOptions": {
    "composite": true,
    "outDir": "../dist/utils"
  }
}
```

### ç›‘è§†æ¨¡å¼é…ç½®

```json
// package.json scripts
{
  "scripts": {
    "build": "tsc",
    "build:watch": "tsc --watch",
    "build:incremental": "tsc --incremental",
    "check": "tsc --noEmit"
  }
}
```

## ğŸ›¡ï¸ æœ€ä½³å®è·µ

### 1. é¡¹ç›®é…ç½®å»ºè®®

```json
{
  "compilerOptions": {
    // æ–°é¡¹ç›®å»ºè®®é…ç½®
    "target": "ES2020",
    "module": "ESNext", 
    "strict": true,
    "noImplicitAny": true,
    "strictNullChecks": true,
    "noImplicitReturns": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedIndexedAccess": true
  }
}
```

### 2. æ„å»ºæµç¨‹é›†æˆ

```json
{
  "scripts": {
    "dev": "tsc --watch",
    "build": "tsc && npm run build:check",
    "build:check": "tsc --noEmit",
    "clean": "rm -rf dist .tsbuildinfo"
  }
}
```

### 3. ç¼–è¾‘å™¨é…ç½®

```json
// .vscode/settings.json
{
  "typescript.preferences.includePackageJsonAutoImports": "on",
  "typescript.suggest.autoImports": true,
  "typescript.updateImportsOnFileMove.enabled": "always"
}
```

## ğŸ“‹ å®è·µç»ƒä¹ 

### ç»ƒä¹  1: å¤šç›®æ ‡ç¼–è¯‘

åˆ›å»ºä¸€ä¸ªæ”¯æŒå¤šç§ç¼–è¯‘ç›®æ ‡çš„é…ç½®ï¼š

```typescript
// src/utils.ts
export const formatDate = (date: Date): string => {
  return date.toISOString().split('T')[0];
};

export const calculateAge = (birthDate: Date): number => {
  const today = new Date();
  return today.getFullYear() - birthDate.getFullYear();
};
```

åˆ›å»ºå¤šä¸ªé…ç½®æ–‡ä»¶ï¼š
- `tsconfig.es5.json` - ç¼–è¯‘åˆ° ES5
- `tsconfig.es2020.json` - ç¼–è¯‘åˆ° ES2020
- `tsconfig.node.json` - Node.js ç¯å¢ƒé…ç½®

### ç»ƒä¹  2: é”™è¯¯è¯Šæ–­

ä¿®å¤ä»¥ä¸‹ä»£ç ä¸­çš„ç±»å‹é”™è¯¯ï¼š

```typescript
// src/errors.ts
function processUser(userData: any) {
  // é—®é¢˜ï¼šuserData å¯èƒ½ä¸º null
  console.log(userData.name.toUpperCase());
  
  // é—®é¢˜ï¼šå‡½æ•°å¯èƒ½ä¸è¿”å›å€¼
  if (userData.age > 18) {
    return "adult";
  }
  
  // é—®é¢˜ï¼šæ•°ç»„è®¿é—®è¶Šç•Œ
  return userData.tags[0];
}
```

### ç»ƒä¹  3: æ„å»ºä¼˜åŒ–

ä¼˜åŒ–ä»¥ä¸‹é¡¹ç›®çš„æ„å»ºé…ç½®ï¼š

```json
{
  "compilerOptions": {
    // æ·»åŠ é€‚å½“çš„ä¼˜åŒ–é€‰é¡¹
  }
}
```

è¦æ±‚ï¼š
- å¯ç”¨å¢é‡ç¼–è¯‘
- ç”Ÿæˆ source map
- æ”¯æŒè·¯å¾„åˆ«å
- åŒ…å«ç±»å‹å£°æ˜æ–‡ä»¶

## ğŸ¯ æœ¬è¯¾æ€»ç»“

### æ ¸å¿ƒè¦ç‚¹

1. **ç¼–è¯‘å™¨åŸºç¡€**: æŒæ¡ `tsc` åŸºæœ¬å‘½ä»¤å’Œé€‰é¡¹
2. **é…ç½®æ–‡ä»¶**: ç†è§£ `tsconfig.json` æ ¸å¿ƒé…ç½®
3. **ç¼–è¯‘ç›®æ ‡**: äº†è§£ä¸åŒç›®æ ‡çš„é€‚ç”¨åœºæ™¯
4. **å®è·µèƒ½åŠ›**: èƒ½å¤Ÿç‹¬ç«‹åˆå§‹åŒ–å’Œé…ç½®é¡¹ç›®

### å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥

```bash
# åŸºç¡€å‘½ä»¤
tsc --init              # åˆå§‹åŒ–é…ç½®
tsc                     # ç¼–è¯‘é¡¹ç›®
tsc --watch            # ç›‘è§†æ¨¡å¼
tsc --noEmit           # ä»…ç±»å‹æ£€æŸ¥

# è°ƒè¯•å‘½ä»¤
tsc --listFiles        # åˆ—å‡ºæ‰€æœ‰æ–‡ä»¶
tsc --showConfig       # æ˜¾ç¤ºå½“å‰é…ç½®
tsc --traceResolution  # è·Ÿè¸ªæ¨¡å—è§£æ
```

## ğŸ“– æ¨èé˜…è¯»

- [TypeScript Compiler Options](https://www.typescriptlang.org/tsconfig)
- [TypeScript Compiler API](https://github.com/microsoft/TypeScript/wiki/Using-the-Compiler-API)
- [tsconfig.json è¯¦è§£](https://www.typescriptlang.org/docs/handbook/tsconfig-json.html)

---

**ä¸Šä¸€è¯¾**: [L0 - TypeScript èµ·æºä¸ç”Ÿæ€](./L0-TypeScriptèµ·æºä¸ç”Ÿæ€.md)  
**ä¸‹ä¸€è¯¾**: [L2 - åŸºç¡€ç±»å‹ä¸æ¨æ–­](./L2-åŸºç¡€ç±»å‹ä¸æ¨æ–­.md)